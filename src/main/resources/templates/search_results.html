<!doctype html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Lookup Web search results page</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>

<body>
  <h1 class="header">Game Lookup</h1>
  <div class="topnav">
    <a href="/home">Home</a>
    <a href="/web_search">Web Search</a>
    <a href="/my_lists">My Lists</a>
  	<div class="topnav-right" th:with="currentUser=${#httpServletRequest.userPrincipal?.name}">
  	  <div th:if="${currentUser != null}">
  	    <span th:text="${'Logged in as: ' + currentUser}"></span>
  	    <a href="javascript: document.logoutForm.submit()" role="menuitem"> Log out</a>
  	    <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
          <input hidden="true" type="submit" value="Sign Out"/>
        </form> 
  	  </div> 
	</div > <!-- topnav-right -->
  </div> <!-- topnav -->
  
  <div th:each="game : ${searchResults}">

    <div class="roundcard">
     
      <div class="gamedata">
        <p th:text="${'Title: ' + game.name}"></p>
        <span>Platforms: </span>
        <span th:each="platform, iterStat : ${game.platforms}" th:text="!${iterStat.last} ? ${platform} + ', ' : ${platform}">Platforms</span>
        <p>Genres: <span th:each="genre, iterStat : ${game.genres}" th:text="!${iterStat.last} ? ${genre.name} + ', ' : ${genre.name}"></span></p>
        <p th:text="${'Release Date: ' + game.releaseDate}"></p>
        <p th:text="${'Metacritic Score: ' + game.metacriticScore}"></p>
        <p th:text="${'ESRB Rating: ' + game.esrbRating}"></p>
      </div>
      
    </div>
  </div>
  <div class="footer">
    <a href="contact">Contact</a>
    <a href="about">About</a>
  </div>
</body>
</html>