<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Lookup Web-Search Page</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>

<body>
  <h1 class="header">Game Lookup</h1>
  <div class="topnav">
    <a href="/home">Home</a>
    <a class="active" href="/web_search">Web Search</a>
    <a href="/my_lists">My Lists</a>
  	<div class="topnav-right" th:with="currentUser=${#httpServletRequest.userPrincipal?.name}">
  	   <div th:if="${currentUser != null}">
  	    <span th:text="${'Logged in as: ' + currentUser}"></span>
  	    <a href="javascript: document.logoutForm.submit()" role="menuitem"> Log out</a>
  	    <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
          <input hidden="true" type="submit" value="Sign Out"/>
        </form> 
  	  </div> 
	</div>
  </div>

  <div class="search">
    <form action="#" th:action="@{/web_search}" method="get">
    
      <input type="text" placeholder="Search for games..." name="query" required>
      <button type="submit">Submit</button>
      
    </form>
  </div>
  
  <form class="web-search-form" th:if="${searchResults != null}" th:action="@{/web_search}" 
    name="searchResultForm" method="post" th:object="${chosenWebSearchResultDto}">
  
    <div th:each="game : ${searchResults}">
      <div class="roundcard">
        <div class="gamedata">
          <p th:text="${'Title: ' + game.name}"></p>
          <span>Platforms: </span>
          <span th:each="platform, iterStat : ${game.platforms}" th:text="!${iterStat.last} ? ${platform} + ', ' : ${platform}">Platforms</span>
          <p>Genres: <span th:each="genre, iterStat : ${game.genres}" th:text="!${iterStat.last} ? ${genre.name} + ', ' : ${genre.name}"></span></p>
          <p th:text="${'Release Date: ' + game.releaseDate}"></p>
          <p th:text="${'Metacritic Score: ' + game.metacriticScore}"></p>
          <span th:text="${'ESRB Rating: ' + game.esrbRating}"></span>
           <a class="roundcard-modal-button" href="#">
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
               <path d="M26 0C11.664 0 0 11.663 0 26s11.664 26 26 26 26-11.663 26-26S40.336 0 26 0zm0 50C12.767 50 2 39.233 2 26S12.767 2 26 2s24 10.767 24 24-10.767 24-24 24z"/>
               <path d="M38.5 25H27V14c0-.553-.448-1-1-1s-1 .447-1 1v11H13.5c-.552 0-1 .447-1 1s.448 1 1 1H25v12c0 .553.448 1 1 1s1-.447 1-1V27h11.5c.552 0 1-.447 1-1s-.448-1-1-1z"/>
             </svg>
            </a>
        </div> <!-- gamedata -->
      </div> <!-- roundcard -->
    </div> 
  
  </form>

    
  <div class="footer">
    <a href="contact">Contact</a>
    <a href="about">About</a>
  </div>
 
</body>
</html>